<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="微信公众号: PyStaData">
<meta property="og:type" content="website">
<meta property="og:title" content="PyStaData">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="PyStaData">
<meta property="og:description" content="微信公众号: PyStaData">
<meta property="og:locale">
<meta property="article:author" content="Gang Li">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>PyStaData</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="تشغيل شريط التصفح">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">PyStaData</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>الأرشيفات</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/17/PythonforResearch-1-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Gang Li">
      <meta itemprop="description" content="微信公众号: PyStaData">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PyStaData">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/17/PythonforResearch-1-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">PythonforResearch|1_文件操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>
              

              <time title="أُنشأ: 2020-08-17 12:27:03 / عُدل: 14:01:02" itemprop="dateCreated datePublished" datetime="2020-08-17T12:27:03+08:00">2020-08-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">في</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <script src="/assets/js/APlayer.min.js"> </script><p><strong>创建日期：</strong> 20200805 14:20<br><strong>上次修改：</strong> 20200805 15:10<br><strong>Python版本：</strong> Python 3.7  </p>
<p>项目介绍：一直想写一份适合经济学等社科背景、学术科研向的Python教程。因为学经济学的多少会对Stata有所了解，有一些写<del>代码</del>命令的经历，这份教程应该：</p>
<ul>
<li>简洁好理解，花最少的时间了解 Python 的核心用法；</li>
<li>实用易操作，最好是能够看完上手即用。</li>
</ul>
<p>在构思了一段时间之后，偶然发现 Ties de Kok 的 <a target="_blank" rel="noopener" href="https://github.com/TiesdeKok/LearnPythonforResearch">Get started with Python for research tutorial</a>项目已经搭建出了我想要的框架。于是打算在这个项目的基础上进行完善，首先将其主要内容“汉化”成中文，之后对用法进行扩充、加入典型用法和案例。</p>
<blockquote>
<p>原作者简介：Ties de Kok (<a target="_blank" rel="noopener" href="http://www.tiesdekok.com">Personal Website</a>)为华盛顿大学福斯特商学院的助理教授，他专注于将计算机科学与实证会计研究相结合，研究兴趣是财务会计、资本市场、计算机科学、自然语言处理和经验管理会计。</p>
</blockquote>
<p>往期目录：</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/rA5kgJvA8eQHRjx9pUGoXA">PythonforResearch | 0_语法基础</a></p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>使用 Pytnon 可以打开多种格式的数据文件，本节仅介绍一些亲测比较好用的方式。后文提及的所有数据都在<code>data</code>文件夹内，生成这些数据的代码在文末。</p>
<h1 id="导入库"><a href="#导入库" class="headerlink" title="导入库"></a>导入库</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> glob <span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> json</span><br></pre></td></tr></table></figure>
<p>为了方便，下面这种引用方式可以使用<code>join</code>代替<code>os.path.join</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join</span><br></pre></td></tr></table></figure>
<h1 id="文件夹建立索引"><a href="#文件夹建立索引" class="headerlink" title="文件夹建立索引"></a>文件夹建立索引</h1><p>将文件夹建立索引对打开文件非常有用,例如要要遍历文件夹中的所有文件,当然有多种实现方式，但是下面将主要介绍<code>os.listdir</code>,<code>glob</code>和<code>os.walk</code>。</p>
<h2 id="定义路径"><a href="#定义路径" class="headerlink" title="定义路径"></a>定义路径</h2><p>示例中所需数据都在<code>data</code>文件夹中，所以首先如下定义路径：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_path = join(os.getcwd(), <span class="string">&#x27;data&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="获取根目录下所有文件"><a href="#获取根目录下所有文件" class="headerlink" title="获取根目录下所有文件"></a>获取根目录下所有文件</h2><p>注意：这种方式会忽略子文件夹中的文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filenames = os.listdir(data_path)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filepaths = [join(data_path, filename) <span class="keyword">for</span> filename <span class="keyword">in</span> filenames]</span><br><span class="line">filepaths[:<span class="number">2</span>] <span class="comment"># show first two items</span></span><br></pre></td></tr></table></figure>
<pre><code>[&#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\data\\311-service-requests.csv&#39;,
 &#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\data\\auto_df.csv&#39;]
</code></pre><p>使用<code>glob</code>，因为它直接允许包含路径名匹配。例如，如果只想要Excel<code>.xlsx</code>文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glob(join(data_path, <span class="string">&#x27;*.xlsx&#x27;</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\data\\excel_sample.xlsx&#39;]
</code></pre><h2 id="获取所有文件（包含子文件夹）"><a href="#获取所有文件（包含子文件夹）" class="headerlink" title="获取所有文件（包含子文件夹）"></a>获取所有文件（包含子文件夹）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果文件夹包含多个级别，则需要使用`os.walk()`或`glob`：</span><br></pre></td></tr></table></figure>
<pre><code>  File &quot;&lt;ipython-input-23-62a5d92e9698&gt;&quot;, line 1
    如果文件夹包含多个级别，则需要使用`os.walk()`或`glob`：
                    ^
SyntaxError: invalid character in identifier
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">folder = os.getcwd()</span><br><span class="line">filepaths = []</span><br><span class="line"><span class="keyword">for</span> root,dirs,files <span class="keyword">in</span> os.walk(folder):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> files:</span><br><span class="line">        filepaths.append(join(root,i))</span><br><span class="line">filepaths[:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\0_语法基础.ipynb&#39;,
 &#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\1_文件打开与保存.ipynb&#39;]
</code></pre><p>使用 <code>glob</code>会产生更清晰的代码,但是会更晦涩：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filepaths_glob = glob(join(folder, <span class="string">&#x27;**/*&#x27;</span>), recursive=<span class="literal">True</span>)</span><br><span class="line">filepaths_glob[:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\0_语法基础.ipynb&#39;,
 &#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\1_文件打开与保存.ipynb&#39;]
</code></pre><h1 id="文本文件"><a href="#文本文件" class="headerlink" title="文本文件"></a>文本文件</h1><p>使用Python默认库，打开文件的四种模式：</p>
<p><code>w</code> -&gt; write only<br><code>r</code> -&gt; read only<br><code>w+</code> -&gt; read and write + completely overwrite file<br><code>a+</code> -&gt; read and write + append at the bottom</p>
<h2 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(join(data_path, <span class="string">&#x27;text_sample.txt&#x27;</span>), <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file_content = file.read()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(file_content)</span><br></pre></td></tr></table></figure>
<pre><code>Learning Python is great. 
Good luck!
</code></pre><h2 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(join(data_path, <span class="string">&#x27;text_sample.txt&#x27;</span>), <span class="string">&#x27;w+&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;Learning Python is great. \nGood luck!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>除了使用<code>with</code>，也可以使用<code>open</code>和<code>close</code>打开文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(join(data_path, <span class="string">&#x27;text_sample.txt&#x27;</span>), <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">file_content = f.read()</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>使用<code>open</code>记得最后一定要<code>.close()</code>,否则会因为文件被占用而报错。因此，推荐使用<code>with</code>方法，它会自动关闭文件。</p>
<h2 id="文件索引中循环"><a href="#文件索引中循环" class="headerlink" title="文件索引中循环"></a>文件索引中循环</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">text_files = glob(join(data_path, <span class="string">&#x27;*.txt&#x27;</span>))</span><br><span class="line">text_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> text_files:</span><br><span class="line">    <span class="keyword">with</span> open(i, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text_list.append(f.read())</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text_list</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;Content of new file. \nHi there!\nNew line&#39;,
 &#39;Learning Python is great. \nGood luck!&#39;]
</code></pre><h1 id="Excel-文件"><a href="#Excel-文件" class="headerlink" title="Excel 文件"></a>Excel 文件</h1><p>有多种方式打开Excel、csv、Stata和SAS数据集，但这里主要介绍使用 <code>Pandas</code> 库。</p>
<h2 id="打开Excel文件"><a href="#打开Excel文件" class="headerlink" title="打开Excel文件"></a>打开Excel文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">excel_file = pd.read_excel(join(data_path, <span class="string">&#x27;excel_sample.xlsx&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p><code>read_excel()</code>函数具有许多选项，可以参阅：<br><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html</a>  </p>
<p><strong>提示</strong>：有时候需要指定编码类型来防止编码报错，例如：<code>,encoding=&#39;utf-8&#39;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 保存Excel文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">excel_file.to_excel(join(data_path, <span class="string">&#x27;excel_sample.xlsx&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>这将保存 Pandas 的数据框（DataFrame）对象，请参见数据处理文件:<br><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_excel.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_excel.html</a>  </p>
<h1 id="CSV-文件"><a href="#CSV-文件" class="headerlink" title="CSV 文件"></a>CSV 文件</h1><h2 id="打开-CSV-文件"><a href="#打开-CSV-文件" class="headerlink" title="打开 CSV 文件"></a>打开 CSV 文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csv_file = pd.read_csv(join(data_path, <span class="string">&#x27;csv_sample.csv&#x27;</span>), sep=<span class="string">&#x27;,&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html</a></p>
<h2 id="保存-CSV-文件"><a href="#保存-CSV-文件" class="headerlink" title="保存 CSV 文件"></a>保存 CSV 文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csv_file.to_csv(join(data_path, <span class="string">&#x27;csv_sample.csv&#x27;</span>), sep=<span class="string">&#x27;,&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html</a></p>
<h1 id="Stata-文件"><a href="#Stata-文件" class="headerlink" title="Stata 文件"></a>Stata 文件</h1><h2 id="打开Stata数据"><a href="#打开Stata数据" class="headerlink" title="打开Stata数据"></a>打开Stata数据</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stata_file = pd.read_stata(join(data_path, <span class="string">&#x27;stata_sample.dta&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_stata.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_stata.html</a>  </p>
<h2 id="保存Stata数据"><a href="#保存Stata数据" class="headerlink" title="保存Stata数据"></a>保存Stata数据</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stata_file.to_stata(join(data_path, <span class="string">&#x27;stata_sample.dta&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_stata.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_stata.html</a></p>
<p><strong>提示</strong>：请确保更新至适用于新Stata版本的最新版本的Pandas。</p>
<h1 id="SAS-文件"><a href="#SAS-文件" class="headerlink" title="SAS 文件"></a>SAS 文件</h1><p>Pandas 只能打开 SAS 文件，不能写入数据：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sas_file &#x3D; pd.read_sas(r&#39;C:\file.sas7bdat&#39;, format&#x3D;&#39;sas7bdat&#39;)</span><br></pre></td></tr></table></figure></p>
<p><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_sas.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_sas.html</a><br>此功能在大多数情况下都有效，但是带有文本的文件可能会很难修复编码错误。</p>
<h1 id="Json-文件"><a href="#Json-文件" class="headerlink" title="Json 文件"></a>Json 文件</h1><h2 id="使用-Pandas-库"><a href="#使用-Pandas-库" class="headerlink" title="使用 Pandas 库"></a>使用 Pandas 库</h2><p><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_json.html">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_json.html</a>  </p>
<p><em>提示：</em>路径也可以是链接（url） </p>
<h3 id="将-JSON-读入为-dataframe"><a href="#将-JSON-读入为-dataframe" class="headerlink" title="将 JSON 读入为 dataframe"></a>将 JSON 读入为 dataframe</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json_df = pd.read_json(join(data_path, <span class="string">&#x27;json_sample.json&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="将-dataframe-保存为-JSON"><a href="#将-dataframe-保存为-JSON" class="headerlink" title="将 dataframe 保存为 JSON"></a>将 dataframe 保存为 JSON</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json_df.to_json(join(data_path, <span class="string">&#x27;json_sample.json&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="使用-JSON-库"><a href="#使用-JSON-库" class="headerlink" title="使用 JSON 库"></a>使用 <code>JSON</code> 库</h2><h3 id="读取-JSON"><a href="#读取-JSON" class="headerlink" title="读取 JSON"></a>读取 JSON</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(join(data_path, <span class="string">&#x27;json_sample.json&#x27;</span>), <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json_data = json.load(f)</span><br></pre></td></tr></table></figure>
<h3 id="写入-Json"><a href="#写入-Json" class="headerlink" title="写入 Json"></a>写入 Json</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(join(data_path, <span class="string">&#x27;json_sample.json&#x27;</span>), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(json_data, f)</span><br></pre></td></tr></table></figure>
<h1 id="生成示例数据文件的代码"><a href="#生成示例数据文件的代码" class="headerlink" title="生成示例数据文件的代码"></a>生成示例数据文件的代码</h1><p>带有随机数的字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">raw_data = &#123;<span class="string">&#x27;foreign&#x27;</span>:&#123;<span class="number">1</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">2</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">3</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">6</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">7</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">8</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">9</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">14</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">21</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">23</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">24</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">30</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">31</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">33</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">37</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">38</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">43</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">48</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">50</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">51</span>:<span class="string">&#x27;Domestic&#x27;</span>,<span class="number">53</span>:<span class="string">&#x27;Foreign&#x27;</span>,<span class="number">56</span>:<span class="string">&#x27;Foreign&#x27;</span>,<span class="number">57</span>:<span class="string">&#x27;Foreign&#x27;</span>,<span class="number">66</span>:<span class="string">&#x27;Foreign&#x27;</span>,<span class="number">70</span>:<span class="string">&#x27;Foreign&#x27;</span>&#125;,</span><br><span class="line">            <span class="string">&#x27;make&#x27;</span>:&#123;<span class="number">1</span>:<span class="string">&#x27;AMCPacer&#x27;</span>,<span class="number">2</span>:<span class="string">&#x27;AMCSpirit&#x27;</span>,<span class="number">3</span>:<span class="string">&#x27;BuickCentury&#x27;</span>,<span class="number">6</span>:<span class="string">&#x27;BuickOpel&#x27;</span>,<span class="number">7</span>:<span class="string">&#x27;BuickRegal&#x27;</span>,<span class="number">8</span>:<span class="string">&#x27;BuickRiviera&#x27;</span>,<span class="number">9</span>:<span class="string">&#x27;BuickSkylark&#x27;</span>,<span class="number">14</span>:<span class="string">&#x27;Chev.Impala&#x27;</span>,<span class="number">21</span>:<span class="string">&#x27;DodgeMagnum&#x27;</span>,<span class="number">23</span>:<span class="string">&#x27;FordFiesta&#x27;</span>,<span class="number">24</span>:<span class="string">&#x27;FordMustang&#x27;</span>,<span class="number">30</span>:<span class="string">&#x27;Merc.Marquis&#x27;</span>,<span class="number">31</span>:<span class="string">&#x27;Merc.Monarch&#x27;</span>,<span class="number">33</span>:<span class="string">&#x27;Merc.Zephyr&#x27;</span>,<span class="number">37</span>:<span class="string">&#x27;OldsDelta88&#x27;</span>,<span class="number">38</span>:<span class="string">&#x27;OldsOmega&#x27;</span>,<span class="number">43</span>:<span class="string">&#x27;Plym.Horizon&#x27;</span>,<span class="number">48</span>:<span class="string">&#x27;Pont.GrandPrix&#x27;</span>,<span class="number">50</span>:<span class="string">&#x27;Pont.Phoenix&#x27;</span>,<span class="number">51</span>:<span class="string">&#x27;Pont.Sunbird&#x27;</span>,<span class="number">53</span>:<span class="string">&#x27;AudiFox&#x27;</span>,<span class="number">56</span>:<span class="string">&#x27;Datsun210&#x27;</span>,<span class="number">57</span>:<span class="string">&#x27;Datsun510&#x27;</span>,<span class="number">66</span>:<span class="string">&#x27;ToyotaCelica&#x27;</span>,<span class="number">70</span>:<span class="string">&#x27;VWDiesel&#x27;</span>&#125;,</span><br><span class="line">            <span class="string">&#x27;price&#x27;</span>: &#123;<span class="number">1</span>:<span class="number">4749</span>,<span class="number">2</span>:<span class="number">3799</span>,<span class="number">3</span>:<span class="number">4816</span>,<span class="number">6</span>:<span class="number">4453</span>,<span class="number">7</span>:<span class="number">5189</span>,<span class="number">8</span>:<span class="number">10372</span>,<span class="number">9</span>:<span class="number">4082</span>,<span class="number">14</span>:<span class="number">5705</span>,<span class="number">21</span>:<span class="number">5886</span>,<span class="number">23</span>:<span class="number">4389</span>,<span class="number">24</span>:<span class="number">4187</span>,<span class="number">30</span>:<span class="number">6165</span>,<span class="number">31</span>:<span class="number">4516</span>,<span class="number">33</span>:<span class="number">3291</span>,<span class="number">37</span>:<span class="number">4890</span>,<span class="number">38</span>:<span class="number">4181</span>,<span class="number">43</span>:<span class="number">4482</span>,<span class="number">48</span>:<span class="number">5222</span>,<span class="number">50</span>:<span class="number">4424</span>,<span class="number">51</span>:<span class="number">4172</span>,<span class="number">53</span>:<span class="number">6295</span>,<span class="number">56</span>:<span class="number">4589</span>,<span class="number">57</span>:<span class="number">5079</span>,<span class="number">66</span>:<span class="number">5899</span>,<span class="number">70</span>:<span class="number">5397</span>&#125;,</span><br><span class="line">            <span class="string">&#x27;weight&#x27;</span>:&#123;<span class="number">1</span>:<span class="number">3350</span>,<span class="number">2</span>:<span class="number">2640</span>,<span class="number">3</span>:<span class="number">3250</span>,<span class="number">6</span>:<span class="number">2230</span>,<span class="number">7</span>:<span class="number">3280</span>,<span class="number">8</span>:<span class="number">3880</span>,<span class="number">9</span>:<span class="number">3400</span>,<span class="number">14</span>:<span class="number">3690</span>,<span class="number">21</span>:<span class="number">3600</span>,<span class="number">23</span>:<span class="number">1800</span>,<span class="number">24</span>:<span class="number">2650</span>,<span class="number">30</span>:<span class="number">3720</span>,<span class="number">31</span>:<span class="number">3370</span>,<span class="number">33</span>:<span class="number">2830</span>,<span class="number">37</span>:<span class="number">3690</span>,<span class="number">38</span>:<span class="number">3370</span>,<span class="number">43</span>:<span class="number">2200</span>,<span class="number">48</span>:<span class="number">3210</span>,<span class="number">50</span>:<span class="number">3420</span>,<span class="number">51</span>:<span class="number">2690</span>,<span class="number">53</span>:<span class="number">2070</span>,<span class="number">56</span>:<span class="number">2020</span>,<span class="number">57</span>:<span class="number">2280</span>,<span class="number">66</span>:<span class="number">2410</span>,<span class="number">70</span>:<span class="number">2040</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>将字典转换为Pandas的dataframe,便于保存：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df_data = pd.DataFrame(raw_data)</span><br><span class="line">df_data.head()</span><br></pre></td></tr></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>foreign</th>
      <th>make</th>
      <th>price</th>
      <th>weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Domestic</td>
      <td>AMCPacer</td>
      <td>4749</td>
      <td>3350</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Domestic</td>
      <td>AMCSpirit</td>
      <td>3799</td>
      <td>2640</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Domestic</td>
      <td>BuickCentury</td>
      <td>4816</td>
      <td>3250</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Domestic</td>
      <td>BuickOpel</td>
      <td>4453</td>
      <td>2230</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Domestic</td>
      <td>BuickRegal</td>
      <td>5189</td>
      <td>3280</td>
    </tr>
  </tbody>
</table>
</div>



<p>保存为不同类型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_path = os.path.join(os.getcwd(), <span class="string">&#x27;data&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(os.path.join(data_path, <span class="string">&#x27;text_sample.txt&#x27;</span>), <span class="string">&#x27;w+&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;Learning Python is great. \nGood luck!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df_data.to_excel(os.path.join(data_path, <span class="string">&#x27;excel_sample.xlsx&#x27;</span>))</span><br><span class="line">df_data.to_csv(os.path.join(data_path, <span class="string">&#x27;csv_sample.csv&#x27;</span>))</span><br><span class="line">df_data.to_stata(os.path.join(data_path, <span class="string">&#x27;stata_sample.dta&#x27;</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df_data.to_json(os.path.join(data_path, <span class="string">&#x27;json_sample.json&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> pandas 没有 <code>.to_sas()</code> 函数。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/05/PythonforResearch-0-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Gang Li">
      <meta itemprop="description" content="微信公众号: PyStaData">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PyStaData">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/05/PythonforResearch-0-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">PythonforResearch|0_基本语法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">نُشر في</span>

              <time title="أُنشأ: 2020-08-05 14:10:27" itemprop="dateCreated datePublished" datetime="2020-08-05T14:10:27+08:00">2020-08-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">عُدل في</span>
                <time title="عُدل: 2020-08-17 14:00:49" itemprop="dateModified" datetime="2020-08-17T14:00:49+08:00">2020-08-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">في</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <script src="/assets/js/APlayer.min.js"> </script><p><strong>创建日期：</strong> 20200805 11:00<br><strong>上次修改：</strong> 20200805 14:10<br><strong>Python版本：</strong> Python 3.7   </p>
<p>项目介绍：一直想写一份适合经济学等社科背景、学术科研向的Python教程。因为学经济学的多少会对Stata有所了解，有一些写~代码~命令的经历，这份教程应该：</p>
<ul>
<li>简洁好理解，花最少的时间了解 Python 的核心用法；</li>
<li>实用易操作，最好是能够看完上手即用。</li>
</ul>
<p>在构思了一段时间之后，偶然发现 Ties de Kok 的 <a target="_blank" rel="noopener" href="https://github.com/TiesdeKok/LearnPythonforResearch">Get started with Python for research tutorial</a>项目已经搭建出了我想要的框架。于是打算在这个项目的基础上进行完善，首先将其主要内容“汉化”成中文，之后对用法进行扩充、加入典型用法和案例。</p>
<blockquote>
<p>原作者简介：Ties de Kok (<a target="_blank" rel="noopener" href="http://www.tiesdekok.com">Personal Website</a>)为华盛顿大学福斯特商学院的助理教授，他专注于将计算机科学与实证会计研究相结合，研究兴趣是财务会计、资本市场、计算机科学、自然语言处理和经验管理会计。</p>
</blockquote>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>Python 中基础的数据类型有<code>int</code>，<code>float</code>和<code>str</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">5</span></span><br><span class="line">b = <span class="number">3.5</span></span><br><span class="line">c = <span class="string">&#x27;A string&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type(a),type(b),type(c)</span><br></pre></td></tr></table></figure>
<pre><code>(int, float, str)
</code></pre><h2 id="转换类型"><a href="#转换类型" class="headerlink" title="转换类型"></a>转换类型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int(<span class="number">3.6</span>),str(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<pre><code>(3, &#39;5&#39;)
</code></pre><h2 id="查看类型"><a href="#查看类型" class="headerlink" title="查看类型"></a>查看类型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type(a),type(b),type(c)</span><br></pre></td></tr></table></figure>
<pre><code>(int, float, str)
</code></pre><h1 id="打印输出"><a href="#打印输出" class="headerlink" title="打印输出"></a>打印输出</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&quot;Hello&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Hello
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&quot;Hello&quot;</span>+<span class="string">&quot;World&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>HelloWorld
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apples = <span class="string">&#x27;apples&#x27;</span></span><br><span class="line">print(<span class="string">&quot;I have&quot;</span>, <span class="number">2</span>, apples)</span><br></pre></td></tr></table></figure>
<pre><code>I have 2 apples
</code></pre><h2 id="format-格式化输出"><a href="#format-格式化输出" class="headerlink" title="format 格式化输出"></a><code>format</code> 格式化输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>.format(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>&#39;Hello World&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&quot;&#123;:.2f&#125;&quot;</span>.format(<span class="number">3.1415926</span>)) </span><br></pre></td></tr></table></figure>
<pre><code>3.14
</code></pre><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">数字</th>
<th style="text-align:left">格式</th>
<th style="text-align:left">输出</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">3.1415926</td>
<td style="text-align:left">{:.2f}</td>
<td style="text-align:left">3.14</td>
<td style="text-align:left">保留小数点后两位</td>
</tr>
<tr>
<td style="text-align:left">3.1415926</td>
<td style="text-align:left">{:+.2f}</td>
<td style="text-align:left">+3.14</td>
<td style="text-align:left">带符号保留小数点后两位</td>
</tr>
<tr>
<td style="text-align:left">-1</td>
<td style="text-align:left">{:+.2f}</td>
<td style="text-align:left">-1.00</td>
<td style="text-align:left">带符号保留小数点后两位</td>
</tr>
<tr>
<td style="text-align:left">2.71828</td>
<td style="text-align:left">{:.0f}</td>
<td style="text-align:left">3</td>
<td style="text-align:left">不带小数</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">{:0&gt;2d}</td>
<td style="text-align:left">05</td>
<td style="text-align:left">数字补零 (填充左边, 宽度为2)</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">{:x&lt;4d}</td>
<td style="text-align:left">5xxx</td>
<td style="text-align:left">数字补x (填充右边, 宽度为4)</td>
</tr>
<tr>
<td style="text-align:left">10</td>
<td style="text-align:left">{:x&lt;4d}</td>
<td style="text-align:left">10xx</td>
<td style="text-align:left">数字补x (填充右边, 宽度为4)</td>
</tr>
<tr>
<td style="text-align:left">1000000</td>
<td style="text-align:left">{:,}</td>
<td style="text-align:left">1,000,000</td>
<td style="text-align:left">以逗号分隔的数字格式</td>
</tr>
<tr>
<td style="text-align:left">0.25</td>
<td style="text-align:left">{:.2%}</td>
<td style="text-align:left">25.00%</td>
<td style="text-align:left">百分比格式</td>
</tr>
<tr>
<td style="text-align:left">1000000000</td>
<td style="text-align:left">{:.2e}</td>
<td style="text-align:left">1.00e+09</td>
<td style="text-align:left">指数记法</td>
</tr>
<tr>
<td style="text-align:left">13</td>
<td style="text-align:left">{:&gt;10d}</td>
<td style="text-align:left">13</td>
<td style="text-align:left">右对齐 (默认, 宽度为10)</td>
</tr>
<tr>
<td style="text-align:left">13</td>
<td style="text-align:left">{:&lt;10d}</td>
<td style="text-align:left">13</td>
<td style="text-align:left">左对齐 (宽度为10)</td>
</tr>
<tr>
<td style="text-align:left">13</td>
<td style="text-align:left">{:^10d}</td>
<td style="text-align:left">13</td>
<td style="text-align:left">中间对齐 (宽度为10)</td>
</tr>
</tbody>
</table>
</div>
<h2 id="f-strings-格式化输出-Python-3-6"><a href="#f-strings-格式化输出-Python-3-6" class="headerlink" title="f-strings 格式化输出(Python 3.6)"></a>f-strings 格式化输出(Python 3.6)</h2><p>Python 3.6新增了f-strings，这个特性叫做字面量格式化字符串，F字符串是开头有一个f的字符串文字，Python会计算其中的用大括号包起来的表达式，并将计算后的值替换进去。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">year, p_version = <span class="number">2018</span>, <span class="string">&#x27;3.6&#x27;</span></span><br><span class="line"><span class="string">f&#x27;The year <span class="subst">&#123;year&#125;</span> is pretty awesome with F-strings from Python <span class="subst">&#123;p_version&#125;</span>&#x27;</span></span><br></pre></td></tr></table></figure>
<pre><code>&#39;The year 2018 is pretty awesome with F-strings from Python 3.6&#39;
</code></pre><h1 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h1><p>以下假设变量：<code>a=10, b=20</code>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">运算符</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">实例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">加 - 两个对象相加</td>
<td style="text-align:left">a + b 输出结果 30</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">减 - 得到负数或是一个数减去另一个数</td>
<td style="text-align:left">a - b 输出结果 -10</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">乘 - 两个数相乘或是返回一个被重复若干次的字符串</td>
<td style="text-align:left">a * b 输出结果 200</td>
</tr>
<tr>
<td style="text-align:left">/</td>
<td style="text-align:left">除 - x除以y</td>
<td style="text-align:left">b / a 输出结果 2</td>
</tr>
<tr>
<td style="text-align:left">%</td>
<td style="text-align:left">取模 - 返回除法的余数</td>
<td style="text-align:left">b % a 输出结果 0</td>
</tr>
<tr>
<td style="text-align:left">**</td>
<td style="text-align:left">幂 - 返回x的y次幂</td>
<td style="text-align:left">a**b 为10的20次方， 输出结果 100000000000000000000</td>
</tr>
</tbody>
</table>
</div>
<h1 id="字符运算符"><a href="#字符运算符" class="headerlink" title="字符运算符"></a>字符运算符</h1><p>用单引号，双引号或三引号定义字符串（用于多行）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hello = <span class="string">&#x27;world&#x27;</span></span><br><span class="line">saying = <span class="string">&quot;hello world&quot;</span></span><br><span class="line">paragraph = <span class="string">&quot;&quot;&quot; This is</span></span><br><span class="line"><span class="string">a paragraph</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><p>Python 中有四种基本的数据结构：列表（<code>list</code>）、元组（<code>tuple</code>）、字典（<code>dict</code>）和集合（<code>set</code>）。</p>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>列表放在中括号（<code>[]</code>）中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pets = [<span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>] </span><br><span class="line">pets.append(<span class="string">&#x27;lizard&#x27;</span>)</span><br><span class="line">pets</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;dogs&#39;, &#39;cat&#39;, &#39;bird&#39;, &#39;lizard&#39;]
</code></pre><h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>元组括在括号（<code>()</code>）中，元组不支持任意添加或删除元素，但是它们更快并且消耗更少的内存。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pets = (<span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>)</span><br><span class="line">pets</span><br></pre></td></tr></table></figure>
<pre><code>(&#39;dogs&#39;, &#39;cat&#39;, &#39;bird&#39;)
</code></pre><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>字典使用大括号（<code>&#123;&#125;</code>）构建,字典是无序的，但具有键（Key），值（value）对。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">person = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;fred&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">29</span>&#125;</span><br><span class="line">print(person[<span class="string">&#x27;name&#x27;</span>], person[<span class="string">&#x27;age&#x27;</span>])</span><br></pre></td></tr></table></figure>
<pre><code>fred 29
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">person[<span class="string">&#x27;money&#x27;</span>] = <span class="number">50</span></span><br><span class="line"><span class="keyword">del</span> person[<span class="string">&#x27;age&#x27;</span>]</span><br><span class="line">person</span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;name&#39;: &#39;fred&#39;, &#39;money&#39;: 50&#125;
</code></pre><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>集就像一个列表，但只能包含唯一值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pets_1 = set([<span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>])</span><br><span class="line">pets_2 = set([<span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;horse&#x27;</span>, <span class="string">&#x27;zebra&#x27;</span>, <span class="string">&#x27;zebra&#x27;</span>])</span><br><span class="line">pets_2</span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;dogs&#39;, &#39;horse&#39;, &#39;zebra&#39;&#125;
</code></pre><p>集合可以用于完成许多有用的操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pets_1.union(pets_2) <span class="comment"># 并集</span></span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;bird&#39;, &#39;cat&#39;, &#39;dogs&#39;, &#39;horse&#39;, &#39;zebra&#39;&#125;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pets_1.intersection(pets_2) <span class="comment"># 交集</span></span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;dogs&#39;&#125;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pets_1.difference(pets_2) <span class="comment"># 补集</span></span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;bird&#39;, &#39;cat&#39;&#125;
</code></pre><h2 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h2><p>基本的数据结构几乎可以处理任何Python项目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">combo = (<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>)</span><br><span class="line">mix = &#123;<span class="string">&#x27;fruit&#x27;</span> : [combo, (<span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;pear&#x27;</span>)]&#125;</span><br><span class="line">mix[<span class="string">&#x27;fruit&#x27;</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<pre><code>(&#39;apple&#39;, &#39;orange&#39;)
</code></pre><h1 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h1><p>如果对象是有序的（例如列表或元组），则可以选择索引：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pets = [<span class="string">&#x27;dogs&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;bird&#x27;</span>, <span class="string">&#x27;lizzard&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">favorite_pet = pets[<span class="number">0</span>]</span><br><span class="line">favorite_pet</span><br></pre></td></tr></table></figure>
<pre><code>&#39;dogs&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reptile = pets[<span class="number">-1</span>]</span><br><span class="line">reptile</span><br></pre></td></tr></table></figure>
<pre><code>&#39;lizzard&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pets[<span class="number">1</span>:<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;cat&#39;, &#39;bird&#39;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pets[:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;dogs&#39;, &#39;cat&#39;]
</code></pre><p>切片也适用于字符串：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fruit = <span class="string">&#x27;banana&#x27;</span></span><br><span class="line">fruit[:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<pre><code>&#39;ba&#39;
</code></pre><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><p>Python可以接收输入的参数，通过定义逻辑和操作来处理输入（并可能返回某些内容）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_5</span>(<span class="params">number</span>):</span></span><br><span class="line">    <span class="keyword">return</span> number + <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>定义函数的操作不会执行代码，仅在调用函数后才会执行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_5(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<pre><code>10
</code></pre><p>也可以添加具有默认值的参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">number, add=<span class="number">5</span></span>):</span></span><br><span class="line">    <span class="keyword">return</span> number + add</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">10</span>, add=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<pre><code>13
</code></pre><h2 id="lambda函数"><a href="#lambda函数" class="headerlink" title="lambda函数"></a>lambda函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pairs = [(<span class="number">1</span>, <span class="string">&#x27;one&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;two&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;three&#x27;</span>), (<span class="number">4</span>, <span class="string">&#x27;four&#x27;</span>)]</span><br><span class="line">pairs.sort(key=<span class="keyword">lambda</span> pair: pair[<span class="number">1</span>])</span><br><span class="line">print(pairs)</span><br></pre></td></tr></table></figure>
<pre><code>[(4, &#39;four&#39;), (1, &#39;one&#39;), (3, &#39;three&#39;), (2, &#39;two&#39;)]
</code></pre><h1 id="空格（代码块）"><a href="#空格（代码块）" class="headerlink" title="空格（代码块）"></a>空格（代码块）</h1><p>Python使用缩进来区分代码块。注意，子代码块有自己的作用域（local scope），注意下方示例的<code>a</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">example</span>():</span></span><br><span class="line">    a = <span class="string">&#x27;Layer 1&#x27;</span></span><br><span class="line">    print(a)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">layer_2</span>():</span></span><br><span class="line">        a = <span class="string">&#x27;Layer 2&#x27;</span></span><br><span class="line">        print(a)</span><br><span class="line">        </span><br><span class="line">    layer_2()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example()</span><br></pre></td></tr></table></figure>
<pre><code>Layer 1
Layer 2
</code></pre><h1 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">grade = <span class="number">95</span></span><br><span class="line"><span class="keyword">if</span> grade == <span class="number">90</span>:</span><br><span class="line">    print(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> grade &lt; <span class="number">90</span>:</span><br><span class="line">    print(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> grade &gt;= <span class="number">80</span>:</span><br><span class="line">    print(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">&#x27;D&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>C
</code></pre><h1 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">6</span>, <span class="number">2</span>):</span><br><span class="line">    print(num)</span><br></pre></td></tr></table></figure>
<pre><code>0
2
4
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list_fruit = [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Banana&#x27;</span>, <span class="string">&#x27;Orange&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> fruit <span class="keyword">in</span> list_fruit:</span><br><span class="line">    print(fruit)</span><br></pre></td></tr></table></figure>
<pre><code>Apple
Banana
Orange
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">    print(num)</span><br><span class="line">    <span class="keyword">if</span> num == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<pre><code>0
1
2
</code></pre><p>也可以使用<code>while</code>循环：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">4</span>:</span><br><span class="line">    print(count)</span><br><span class="line">    count += <span class="number">1</span></span><br></pre></td></tr></table></figure>
<pre><code>0
1
2
3
</code></pre><p>遍历列表中的元组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tuple_in_list = [(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>)]</span><br><span class="line"><span class="keyword">for</span> a, b <span class="keyword">in</span> tuple_in_list:</span><br><span class="line">    print(a + b)</span><br></pre></td></tr></table></figure>
<pre><code>3
7
</code></pre><p>在字典中循环：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dictionary = &#123;<span class="string">&#x27;one&#x27;</span> : <span class="number">1</span>, <span class="string">&#x27;two&#x27;</span> : <span class="number">2</span>, <span class="string">&#x27;three&#x27;</span> : <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> dictionary.items():</span><br><span class="line">    print(key, value + <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<pre><code>one 11
two 12
three 13
</code></pre><h1 id="推导式"><a href="#推导式" class="headerlink" title="推导式"></a>推导式</h1><p>推导式可以使用循环很方便的生成列表和字典。</p>
<h2 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new_list = [x + <span class="number">5</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>)]</span><br><span class="line">new_list</span><br></pre></td></tr></table></figure>
<pre><code>[5, 6, 7, 8, 9, 10]
</code></pre><p>传统方式的等效操作为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new_list = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>):</span><br><span class="line">    new_list.append(x + <span class="number">5</span>)</span><br><span class="line">new_list</span><br></pre></td></tr></table></figure>
<pre><code>[5, 6, 7, 8, 9, 10]
</code></pre><h2 id="字典推导式"><a href="#字典推导式" class="headerlink" title="字典推导式"></a>字典推导式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new_dict = &#123;<span class="string">&#x27;num_&#123;&#125;&#x27;</span>.format(x) : x + <span class="number">5</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>)&#125;</span><br><span class="line">new_dict</span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;num_0&#39;: 5, &#39;num_1&#39;: 6, &#39;num_2&#39;: 7, &#39;num_3&#39;: 8, &#39;num_4&#39;: 9, &#39;num_5&#39;: 10&#125;
</code></pre><p>传统方式的等效操作为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">6</span>):</span><br><span class="line">    new_dict[<span class="string">&#x27;num_&#123;&#125;&#x27;</span>.format(x)] = x + <span class="number">5</span></span><br><span class="line">new_dict</span><br></pre></td></tr></table></figure>
<pre><code>&#123;&#39;num_0&#39;: 5, &#39;num_1&#39;: 6, &#39;num_2&#39;: 7, &#39;num_3&#39;: 8, &#39;num_4&#39;: 9, &#39;num_5&#39;: 10&#125;
</code></pre><h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>Python 异常报错如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">num_list.remove(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<pre><code>---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-223-926b625f5509&gt; in &lt;module&gt;
      1 num_list = [1, 2, 3]
----&gt; 2 num_list.remove(4)


ValueError: list.remove(x): x not in list
</code></pre><p>可以使用<code>try</code>和<code>except</code>捕获异常：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    num_list.remove(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">&#x27;ERROR!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>ERROR!
</code></pre><p>将错误类型指定为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    num_list.remove(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">&#x27;Error: &#x27;</span>, e)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">&#x27;Other error: &#x27;</span>, e)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    print(<span class="string">&#x27;Done&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Error:  list.remove(x): x not in list
Done
</code></pre><h1 id="导入库"><a href="#导入库" class="headerlink" title="导入库"></a>导入库</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">math.sin(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<pre><code>0.8414709848078965
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math <span class="keyword">as</span> math_lib</span><br><span class="line">math_lib.sin(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<pre><code>0.8414709848078965
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sin</span><br><span class="line">sin(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<pre><code>0.8414709848078965
</code></pre><h1 id="系统操作"><a href="#系统操作" class="headerlink" title="系统操作"></a>系统操作</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure>
<h2 id="获取当前路径"><a href="#获取当前路径" class="headerlink" title="获取当前路径"></a>获取当前路径</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">r&#x27;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch&#x27;</span>)</span><br><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>
<pre><code>&#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch&#39;
</code></pre><h2 id="输出当前路径文件（夹）"><a href="#输出当前路径文件（夹）" class="headerlink" title="输出当前路径文件（夹）"></a>输出当前路径文件（夹）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.listdir()[:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;.ipynb_checkpoints&#39;, &#39;0_语法基础.ipynb&#39;, &#39;data&#39;, &#39;images&#39;]
</code></pre><p>结合列表推导式进行文件类型过滤：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[file <span class="keyword">for</span> file <span class="keyword">in</span> os.listdir() <span class="keyword">if</span> file[<span class="number">-5</span>:] == <span class="string">&#x27;ipynb&#x27;</span>][:<span class="number">5</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;0_语法基础.ipynb&#39;]
</code></pre><h2 id="更改路径"><a href="#更改路径" class="headerlink" title="更改路径"></a>更改路径</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">r&#x27;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\data&#x27;</span>)</span><br><span class="line">os.getcwd()</span><br></pre></td></tr></table></figure>
<pre><code>&#39;D:\\PyStaData\\Python\\Python_for_Research\\PythonforResearch\\data&#39;
</code></pre><p><code>r&#39;path&#39;</code>表示原始字符串，原始字符串不将<code>\</code>视为特殊字符。</p>
<h1 id="文件输入与输出"><a href="#文件输入与输出" class="headerlink" title="文件输入与输出"></a>文件输入与输出</h1><p>打开文件的四种模式：</p>
<p><code>w</code> -&gt; write only<br><code>r</code> -&gt; read only<br><code>w+</code> -&gt; read and write + completely overwrite file<br><code>a+</code> -&gt; read and write + append at the bottom</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;new_file.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;Content of new file. \nHi there!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;new_file.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file_content = file.read()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_content</span><br></pre></td></tr></table></figure>
<pre><code>&#39;Content of new file. \nHi there!&#39;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(file_content)</span><br></pre></td></tr></table></figure>
<pre><code>Content of new file. 
Hi there!
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;new_file.txt&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;\n&#x27;</span> + <span class="string">&#x27;New line&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;new_file.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    print(file.read())</span><br></pre></td></tr></table></figure>
<pre><code>Content of new file. 
Hi there!
New line
</code></pre><p>最好使用<code>with</code>，因为它会自动关闭文件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="الصفحة السابقة"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          المحتويات
        </li>
        <li class="sidebar-nav-overview">
          عام
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Gang Li</p>
  <div class="site-description" itemprop="description">微信公众号: PyStaData</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">المقالات</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">التصنيفات</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">الوسوم</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gang Li</span>
</div>
  <div class="powered-by">تطبيق الموقع <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
